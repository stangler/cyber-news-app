version: 2

updates:
  # ルート (concurrently など)
  - package-ecosystem: npm
    directory: /
    schedule:
      interval: weekly
      day: monday
      timezone: Asia/Tokyo
    open-pull-requests-limit: 10
    labels:
      - dependencies
    groups:
      root-dependencies:
        patterns:
          - "*"

  # frontend (React, Vite, Tailwind, D3 など)
  - package-ecosystem: npm
    directory: /frontend
    schedule:
      interval: weekly
      day: monday
      timezone: Asia/Tokyo
    open-pull-requests-limit: 10
    labels:
      - dependencies
      - frontend
    groups:
      react:
        patterns:
          - "react"
          - "react-dom"
          - "@types/react"
          - "@types/react-dom"
      vite:
        patterns:
          - "vite"
          - "@vitejs/*"
      tailwind:
        patterns:
          - "tailwindcss"
          - "@tailwindcss/*"
      d3:
        patterns:
          - "d3"
          - "d3-*"
          - "@types/d3"
          - "@types/d3-*"
          - "topojson-*"
          - "@types/topojson-*"
      typescript:
        patterns:
          - "typescript"
          - "@types/*"
        exclude-patterns:
          - "@types/react"
          - "@types/react-dom"
          - "@types/d3"
          - "@types/d3-*"
          - "@types/topojson-*"
      eslint:
        patterns:
          - "eslint"
          - "@eslint/*"
          - "eslint-*"

  # worker (Cloudflare Workers)
  - package-ecosystem: npm
    directory: /worker
    schedule:
      interval: weekly
      day: monday
      timezone: Asia/Tokyo
    open-pull-requests-limit: 10
    labels:
      - dependencies
      - worker
    groups:
      cloudflare:
        patterns:
          - "wrangler"
          - "@cloudflare/*"
      typescript:
        patterns:
          - "typescript"
